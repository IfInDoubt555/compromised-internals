@import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;600;700&display=swap');

@import './decadeThemes.css';
@import './fade.css';

@tailwind base;
@tailwind components;
@tailwind utilities;

/* -------------------------
   Base
--------------------------*/
@layer base {
  :root { --nav-h: 64px; }          /* mobile fallback */
  @media (min-width: 2650px) {
    :root { --nav-h: 80px; }        /* desktop fallback */
  }  html {
    font-family: 'Orbitron', sans-serif;
    font-size: 16px;
    scroll-padding-top: calc(var(--nav-h) + 8px); /* keep anchors out from under sticky nav */
  }
  [x-cloak] { display: none !important; }

  /* sticky-safe: never hide overflow on root */
  html, body { overflow-x: visible; }
}

/* -------------------------
   Components (Calendar polish + championships + History helpers)
--------------------------*/
@layer components {
  /* -------- FullCalendar -------- */
  .fc .fc-toolbar { @apply !items-center !gap-2; }
  .fc .fc-toolbar-title { @apply text-lg md:text-2xl font-orbitron; }
  .fc .fc-button { @apply !py-1 !px-2 !text-sm rounded-md bg-gray-700 text-white hover:bg-gray-600; }

  .fc .fc-daygrid-day-number { @apply text-xs md:text-sm; }
  .fc-theme-standard td,
  .fc-theme-standard th { @apply border-gray-300; }

  .fc .fc-daygrid-event { @apply border-0; }
  .fc .fc-daygrid-event:hover { @apply brightness-110; }

  /* Month grid colors (combined class) */
  .champ-wrc.fc-daygrid-event { @apply bg-blue-700 text-white; }
  .champ-erc.fc-daygrid-event { @apply bg-amber-500 text-black; }
  .champ-ara.fc-daygrid-event { @apply bg-green-600 text-white; }

  /* List view dots */
  .champ-wrc .fc-list-event-dot { @apply bg-blue-700; }
  .champ-erc .fc-list-event-dot { @apply bg-amber-500; }
  .champ-ara .fc-list-event-dot { @apply bg-green-600; }

  .fc .fc-list { @apply text-gray-900; }
  .fc .fc-list-event-title { @apply font-medium; }
  .fc .fc-list-event-time { @apply text-xs text-gray-600; }

  /* make list sticky header clear the sticky site nav */
  .fc .fc-list-day-cushion {
    position: sticky;
    top: var(--nav-h);
    z-index: 10;
    @apply bg-gray-100;
  }
  .fc .fc-list-table { @apply rounded-xl overflow-hidden; }
  .fc tr.fc-list-event:hover td { @apply bg-gray-50; }

  /* -------- Light/Dark Mode -------- */

  /* Inputs */
  .ci-input, .form-input {
    @apply w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm shadow-sm
           focus:outline-none focus:border-blue-600 focus:ring-2 focus:ring-blue-600/30
           text-gray-900 dark:bg-zinc-900 dark:border-zinc-700 dark:text-gray-100;
  }
  .ci-select, .form-select {
    @apply w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm shadow-sm
           focus:outline-none focus:border-blue-600 focus:ring-2 focus:ring-blue-600/30
           text-gray-900 dark:bg-zinc-900 dark:border-zinc-700 dark:text-gray-100;
  }
  .ci-textarea, .form-textarea {
    @apply w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm shadow-sm
           focus:outline-none focus:border-blue-600 focus:ring-2 focus:ring-blue-600/30
           text-gray-900 dark:bg-zinc-900 dark:border-zinc-700 dark:text-gray-100;
  }

  .ci-help { @apply text-[11px] text-gray-500 dark:text-gray-400; }
  .ci-error { @apply text-xs text-red-600 dark:text-red-400; }

  /* Cards */
  .ci-admin-card {
    @apply rounded-xl bg-white p-6 shadow ring-1 ring-black/5
           dark:bg-zinc-900 dark:ring-white/10;
  }

  /* Links + separators */
  .ci-link { @apply text-blue-600 hover:underline dark:text-sky-300 dark:hover:text-sky-200; }
  .ci-sep  { @apply text-gray-400 dark:text-gray-500; }

  /* Buttons */
  .ci-btn        { @apply inline-flex items-center gap-2 rounded px-3 py-2 text-sm font-semibold transition; }
  .ci-btn-primary{ @apply ci-btn bg-indigo-600 text-white hover:bg-indigo-700; }
  .ci-btn-success{ @apply ci-btn bg-green-600  text-white hover:bg-green-700; }
  .ci-btn-danger { @apply ci-btn bg-red-600    text-white hover:bg-red-700; }
  .ci-btn-ghost  { @apply ci-btn bg-white ring-1 ring-black/5 hover:bg-gray-50
                           dark:bg-zinc-900 dark:ring-white/10 dark:hover:bg-zinc-800; }

  /* Tables */
  .ci-table-wrap {
    @apply overflow-x-auto rounded-xl shadow ring-1 ring-black/5
           bg-white dark:bg-zinc-900 dark:ring-white/10;
  }
  .ci-table { @apply min-w-full text-sm table-fixed; }
  .ci-thead { @apply bg-gray-100 text-gray-800 font-semibold dark:bg-zinc-800/70 dark:text-gray-200; }
  .ci-th    { @apply px-4 py-3 border-b border-gray-200 dark:border-zinc-800 text-left; }
  .ci-td    { @apply px-4 py-3 border-b border-gray-200 dark:border-zinc-800; }
  .ci-tr    { @apply hover:bg-gray-50 dark:hover:bg-zinc-800/60; }

  /* Alerts */
  .ci-alert {
    @apply p-4 rounded ring-1 shadow-sm
           bg-stone-50 text-stone-800 ring-stone-900/5
           dark:bg-stone-900/60 dark:text-stone-200 dark:ring-white/10;
  }
  .ci-alert-warn {
    @apply border-l-4 border-yellow-400 bg-yellow-50 text-yellow-900
           dark:border-yellow-700 dark:bg-yellow-950/30 dark:text-yellow-200;
  }

  /* Badges */
  .ci-badge {
    @apply inline-flex items-center rounded-full px-2 py-0.5 text-xs font-medium
           bg-gray-100 text-gray-700 ring-1 ring-black/5
           dark:bg-zinc-800 dark:text-gray-200 dark:ring-white/10;
  }

  /* Code / kbd */
  .ci-code { @apply font-mono text-[12px] px-1.5 py-0.5 rounded bg-black/5 text-gray-800
                     dark:bg-white/10 dark:text-gray-100; }
  .ci-kbd  { @apply font-mono text-[11px] px-1.5 py-0.5 rounded ring-1 ring-black/10 bg-white
                     dark:bg-zinc-900 dark:ring-white/10; }

  /* Pagination */
  .ci-pagination { @apply mt-4; }
  .ci-pagination a, .ci-pagination span {
    @apply inline-flex items-center justify-center min-w-9 h-9 mx-0.5 rounded
           ring-1 ring-black/5 bg-white text-gray-800 hover:bg-gray-50
           dark:bg-zinc-900 dark:text-gray-100 dark:ring-white/10 dark:hover:bg-zinc-800;
  }
  .ci-pagination .active > span { @apply bg-indigo-600 text-white ring-0 dark:bg-indigo-600; }

  /* Surfaces */
  .ci-surface      { @apply bg-stone-50/90 ring-1 ring-stone-900/5 shadow-sm dark:bg-stone-900/70 dark:ring-white/10; }
  .ci-surface-hero { @apply bg-stone-900/70 ring-1 ring-white/10 backdrop-blur shadow-xl; }
  .ci-divider      { @apply divide-stone-200 dark:divide-white/10; }
  .ci-card         { @apply rounded-xl bg-stone-50/95 ring-1 ring-stone-200/60 shadow-sm dark:bg-stone-900/70 dark:ring-white/10; }
  .ci-card-hero    { @apply rounded-2xl ci-surface-hero p-6 sm:p-8; }

  /* Type */
  .ci-title-xl { @apply font-orbitron text-3xl sm:text-4xl font-bold tracking-tight text-stone-900 dark:text-stone-100; }
  .ci-title-lg { @apply font-orbitron text-2xl font-bold text-stone-900 dark:text-stone-100; }
  .ci-title-md { @apply font-orbitron text-lg  font-bold text-stone-900 dark:text-stone-100; }
  .ci-body     { @apply text-stone-700 dark:text-stone-300; }
  .ci-muted    { @apply text-stone-500 dark:text-stone-400; }

  /* Links / CTAs */
  .ci-cta       { @apply font-semibold text-rose-700 hover:text-rose-600 dark:text-rose-300 dark:hover:text-rose-200; }
  .ci-btn       { @apply inline-flex items-center rounded-lg px-3 py-2 text-sm font-semibold transition; }
  .ci-btn-amber { @apply ci-btn bg-amber-400/90 text-stone-900 hover:bg-amber-400; }
  .ci-btn-sky   { @apply ci-btn bg-sky-400/90   text-stone-900 hover:bg-sky-400; }

  /* --- FullCalendar dark skin ----------------------------------- */
  .dark .fc { @apply text-stone-200; }
  .dark .fc a { @apply text-stone-200; }

  .dark .fc-theme-standard .fc-scrollgrid { @apply bg-stone-900/50; }
  .dark .fc .fc-col-header-cell { @apply bg-stone-900/60; }
  .dark .fc .fc-col-header-cell-cushion { @apply text-stone-300; }

  .dark .fc .fc-daygrid-day { @apply bg-stone-900/40; }
  .dark .fc .fc-day-other   { @apply bg-stone-900/30; }
  .dark .fc .fc-daygrid-day-number { @apply text-stone-400; }

  .dark .fc .fc-day-today { @apply bg-sky-400/10; }

  .dark .fc-theme-standard td,
  .dark .fc-theme-standard th { @apply border-white/10; }

  .dark .fc .fc-toolbar-title { @apply text-stone-200; }
  .dark .fc .fc-button { @apply bg-stone-800 text-stone-100 hover:bg-stone-700; }

  .dark .fc .fc-list { @apply text-stone-200; }
  .dark .fc .fc-list-day-cushion { @apply bg-stone-800/50; }
  .dark .fc tr.fc-list-event:hover td { @apply bg-stone-800/40; }

  /* ===========================
     History section helpers
     =========================== */

  /* Readable card surface over animated decade backgrounds */
  .history-card {
    background: rgba(255, 255, 255, 0.55);
    border: 1px solid rgba(0, 0, 0, 0.08);
    backdrop-filter: blur(3px);
    border-radius: 0.5rem;
    max-width: 100%;
    overflow-x: clip;
  }
  .history-card,
  .history-section,
  .history-list { max-width: 100%; overflow-x: clip; }

  .history-card:hover { background: rgba(255, 255, 255, 0.7); }
  .history-divider { border-color: rgba(0, 0, 0, 0.12); }

  .history-chip {
    background: rgba(255,255,255,.85);
    border: 1px solid rgba(0,0,0,.06);
    border-radius: 9999px;
    box-shadow: 0 1px 1px rgba(0,0,0,.04);
  }

  .history-decade-tab {
    background: rgba(255,255,255,.30);
    border-left: 4px solid transparent;
    border-top-right-radius: .75rem;
    border-bottom-right-radius: .75rem;
    box-shadow: 0 1px 1px rgba(0,0,0,.04);
  }
  .history-decade-tab.is-active {
    border-left-color: rgba(0,0,0,.25);
    background: rgba(255,255,255,.55);
  }

  .history-title { @apply font-semibold; word-break: break-word; hyphens: auto; }
  .history-blurb { @apply text-gray-700; }

  .bookmark-tab {
    @apply px-4 py-2 font-semibold rounded-r-lg shadow-sm transition;
    background: rgba(255, 255, 255, 0.3);
    border-left-width: 4px;
  }
  .bookmark-tab--active { border-left-color: #ffffffaa; background: rgba(255, 255, 255, 0.5); }

  /* --- Mobile toolbar & drawer ---------------------------------- */
  .history-toolbar {
    display: grid;
    gap: .5rem;
    padding: .5rem;
    border-radius: .75rem;
    background: rgba(255,255,255,.86);
    border: 1px solid rgba(0,0,0,.06);
    box-shadow: 0 1px 2px rgba(0,0,0,.04);
    transition: transform .2s ease, opacity .2s ease;
  }
  .history-toolbar--ghost { transform: translateY(-10px); opacity: .35; pointer-events: none; }

  .history-drawer {
    position: fixed;
    inset: 0 auto 0 0;
    width: 78%;
    max-width: min(320px, 90vw);
    height: 100%;
    background: rgba(255,255,255,.98);
    border-right: 1px solid rgba(0,0,0,.06);
    padding: 1rem;
    transform: translateX(calc(-100% - 8px));
    will-change: transform;
    contain: layout paint;
  }
  .drawer-open .history-drawer { transform: translateX(0); }

  .history-pull-tab {
    position: fixed;
    left: 0;
    top: 45%;
    translate: 0 -50%;
    z-index: 40;
    width: 26px;
    height: 46px;
    border-radius: 0 .5rem .5rem 0;
    background: rgba(0,0,0,.65);
    color: #fff;
    font-weight: 700;
    display: grid;
    place-items: center;
    transition: opacity .2s ease, transform .2s ease;
  }
  .history-pull-tab:active { transform: scale(.98); }

  .pill      { @apply px-3 py-1 rounded-full bg-white/10 ring-1 ring-white/10 text-sm inline-flex items-center gap-2; }
  .pill-hover{ @apply hover:bg-white/20 transition; }
  .pill-primary { @apply bg-blue-600/80 text-white hover:bg-blue-600; }

  .text-glow { text-shadow: 0 1px 1px rgba(0,0,0,.35); }

  .scrim::before {
    content: "";
    position: absolute; inset: 0;
    background: linear-gradient(to bottom, rgba(0,0,0,.28), rgba(0,0,0,.12), rgba(0,0,0,.28));
    pointer-events: none;
  }
}

/* -------------------------
   Utilities
--------------------------*/
@layer utilities {
  :root { --nav-h: 64px; }                 /* sensible default */
  .pt-nav { padding-top: var(--nav-h); }   /* opt-in page offset */
  .scroll-mt-nav { scroll-margin-top: var(--nav-h); } /* handy for in-page anchors */
  .fade-in { @apply animate-fade-in; }
  .font-orbitron { font-family: 'Orbitron', sans-serif; }

  /* no-scrollbar helper (used on mobile chips) */
  .no-scrollbar::-webkit-scrollbar { display: none; }
  .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

  /* use this on specific content wrappers that misbehave */
  .no-x-scroll { overflow-x: clip; }

  /* helpers for sticky nav spacing / anchors */
  .pt-nav { padding-top: var(--nav-h); }
  .scroll-mt-nav { scroll-margin-top: calc(var(--nav-h) + 12px); }
}